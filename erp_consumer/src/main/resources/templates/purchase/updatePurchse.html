<!DOCTYPE html>
<html    xmlns="http://www.w3.org/1999/xhtml"
         xmlns:th="http://www.thymeleaf.org"
         xmlns:shiro="http://www.pollix.at/thymeleaf/shiro"
         xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head>
    <meta charset="UTF-8" />
    <title>Title</title>
    <script type="text/javascript"  src="../jquery-1.9.1.min.js"></script>
    <link rel="stylesheet" href="../bootstrap3/css/bootstrap.css"/>
    <link rel="stylesheet" href="../bootstrap3/css/bootstrap-theme.css"/>
    <link rel="stylesheet" href="../bootstrap-treeview/bootstrap-treeview.min.css"/>
    <link rel="stylesheet" href="../bootstrap-table/bootstrap-table.css"/>
    <link rel="stylesheet" href="../bootstrap-select/css/bootstrap-select.css" />
    <link rel="stylesheet" href="../bootstrap-datetimepicker/css/bootstrap-datetimepicker.css" />
    <script type="text/javascript"  src="../bootstrap3/js/bootstrap.min.js"></script>
    <script type="text/javascript"  src="../bootstrap-table/bootstrap-table.js"></script>
    <script type="text/javascript" src="../bootstrap-bootbox/bootbox.js"></script>
    <script type="text/javascript" src="../bootstrap-datetimepicker/js/bootstarp/bootstrap-datetimepicker/js/bootstrap-datetimepicker.js"></script>
    <script type="text/javascript"  src="../bootstrap-datetimepicker/js/bootstarp/bootstrap-datetimepicker/js/locales/bootstrap-datetimepicker.zh-CN.js"></script>
    <script src="../bootstrap-table/locale/bootstrap-table-zh-CN.js"></script>
    <script src="../bootstrap-select/js/bootstrap-select.js"></script>
    <script src="../static/bootstrap-select/js/i18n/defaults-zh_CN.js"></script>
</head>
<body>
<ul class="nav nav-tabs">
    <li class="active"><a data-toggle="tab" href="#home">基本信息</a></li>
    <li><a data-toggle="tab" href="#menu1">发票信息</a></li>
    <li><a data-toggle="tab" href="#menu2">绑定商品</a></li>
    <li><a data-toggle="tab" href="#menu3">证件信息</a></li>
    <li><a data-toggle="tab" href="#menu4">付款方面</a></li>
</ul>
<div class="tab-content">
    <div id="home" class="tab-pane fade in active">
        <form  id="myPurchase">
            <div class="panel panel-warning">
                <div class="panel-heading">
                    <span class="glyphicon glyphicon-heart" style="color: rgb(247, 3, 94); font-size: 15px;"></span>基本信息
                </div>
                <div class="panel-body">
                    <input type="hidden"  name="id" />
                    <div class="row">
                        <div class="col-md-10">
                            <div  class="form-inline" >
                                <label>引进负责人:</label>
                                <input type="text" class="form-control"  name="chargePerson"    placeholder="引进负责人"/>
                            </div>
                            <div  class="form-inline" style="margin-top: 15px">
                                <label>供应商编号:</label>
                                <input type="text" class="form-control"  name="supplierNumber"  placeholder="供应商编号"/>
                            </div>
                            <div  class="form-inline" style="margin-top: 15px">
                                <label>供应商来源:</label>
                                <input type="text" class="form-control"  name="supplierSource"  placeholder="供应商来源"/>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="panel-heading">
                    <span class="glyphicon glyphicon-heart" style="color: rgb(247, 3, 94); font-size: 15px;"> </span>公司信息
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col-md-10">
                            <div  class="form-inline" style="float: left;margin-top: 15px">
                                <label>单位名称:</label>
                                <input type="text" class="form-control"  name="companyName"   placeholder="单位名称"/>
                            </div>
                            <div  class="form-inline" style="float: left;margin-top: 15px;margin-left:30px;">
                                <label>供方简称:</label>
                                <input type="text" class="form-control"  name="simpleName"  placeholder="供方简称"/>
                            </div>
                            <div  class="form-inline" style="float: left;margin-top: 15px;margin-left:30px;">
                                <label>品牌:</label>
                                <input type="text" class="form-control"  name="brand"  placeholder="品牌"/>
                            </div>
                        </div>
                        <div  class="col-md-10">
                            <div  class="form-inline" style="margin-top: 15px">
                                <label>所属分类:</label>
                                <input type="text" class="form-control"  name="classification"  placeholder="所属分类"/>
                            </div>
                            <div  class="form-inline" style="margin-top: 15px">
                                <label>经营范围:</label>
                                <input type="text" class="form-control"  name="businessScope"  placeholder="经营范围"/>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="panel-heading">
                    <span class="glyphicon glyphicon-heart" style="color: rgb(247, 3, 94); font-size: 15px;"> </span> 联系信息
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col-md-4">
                            <div  class="form-inline" style="float: left;margin-top: 15px">
                                <label>联系人:</label>
                                <input type="text" class="form-control"  name="contacts"   placeholder="联系人"/>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div  class="form-inline" style="float: left;margin-top: 15px;margin-left:30px;">
                                <label>职业:</label>
                                <input type="text" class="form-control"  name="profession"  placeholder="职业"/>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div  class="form-inline" style="float: left;margin-top: 15px;margin-left:30px;">
                                <label>手机:</label>
                                <input type="text" class="form-control"  name="phone"  placeholder="手机"/>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div  class="form-inline" style="float: left;margin-top: 15px">
                                <label>固定电话:</label>
                                <input type="text" class="form-control"  name="telephone"   placeholder="固定电话"/>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div  class="form-inline" style="float: left;margin-top: 15px;margin-left:30px;">
                                <label>传真:</label>
                                <input type="text" class="form-control"  name="fax"  placeholder="传真"/>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div  class="form-inline" style="float: left;margin-top: 15px;margin-left:30px;">
                                <label>邮件:</label>
                                <input type="text" class="form-control"  name="email"  placeholder="邮件"/>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div  class="form-inline" style="float: left;margin-top: 15px">
                                <label>QQ:</label>
                                <input type="text" class="form-control"  name="qq"   placeholder="QQ"/>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div  class="form-inline" style="float: left;margin-top: 15px;margin-left:30px;">
                                <label>微信:</label>
                                <input type="text" class="form-control"  name="wechat"  placeholder="微信"/>
                            </div>
                        </div>
                        <div style="clear:both"></div>
                        <div class="col-md-4">
                            <div  class="form-inline" style="float: left;margin-top: 15px">
                                <label>所在省市:</label>
                                <select class="form-control" name="province">
                                    <option value="0">请选择</option>
                                    <option value="1">江苏省</option>
                                    <option value="2">浙江省</option>
                                    <option value="3">北京</option>
                                    <option value="4">上海</option>
                                    <option value="5">广东省</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div  class="form-inline" style="float: left;margin-top: 15px;margin-left:30px;">
                                <label>所在区域:</label>
                                <input type="text" class="form-control"  name="area"   placeholder="所在区域"/>
                            </div>
                        </div>
                        <div  class="col-md-10">
                            <div  class="form-inline" style="margin-top: 15px">
                                <label>地址:</label>
                                <input type="text" class="form-control"  name="adress"  placeholder="地址"/>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <button type="button" class="btn btn-default" onclick="fanhui()"><span class="glyphicon glyphicon-remove" > </span>取消</button>
            <shiro:hasPermission  name="addPurchse:save"><button type="button" class="btn btn-info"  onclick="save()"><span class="glyphicon glyphicon-ok" > </span>保存</button></shiro:hasPermission>
        </form>
    </div>
    <div id="menu1" class="tab-pane fade">
        <form  id="myReceipt">
            <input type="hidden"  name="receiptId" />
            <input  type="hidden"  id="supplierNumberFaPiao"  name="supplierNumberFaPiao" />
            <div class="panel panel-warning">
                <div class="panel-heading">
                    <span class="glyphicon glyphicon-heart" style="color: rgb(247, 3, 94); font-size: 15px;"></span>发票信息
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col-md-10">
                            <div  class="form-inline" >
                                <div style="float: left">
                                <label>单位名称:</label>
                                </div>
                                <div style="float: left;margin-left: 37px">
                                <input type="text" class="form-control"  name="adressCom"   placeholder="单位名称"/>
                                </div>
                            </div>
                            <div style="clear:both"></div>
                            <div  class="form-inline" style="margin-top: 15px">
                                <div style="float: left"><label>纳税号:</label></div>
                                <div style="float: left;margin-left: 50px">
                                <input type="text" class="form-control"  name="taxNumber"  placeholder="纳税号"/>
                                </div>
                            </div>
                            <div style="clear:both"></div>
                            <div  class="form-inline" style="margin-top: 15px">
                                <div style="float: left"> <label>开户银行:</label></div>
                                <div style="float: left;margin-left: 37px">
                                    <input type="text" class="form-control"  name="bank"  placeholder="开户银行"/>
                                </div>
                            </div>
                            <div style="clear:both"></div>
                            <div  class="form-inline" style="margin-top: 15px">
                                <div style="float: left"> <label>地址:</label></div>
                                <div style="float: left;margin-left: 65px">
                                <input type="text" class="form-control"  name="bankAdress"  placeholder="地址"/>
                                </div>
                            </div>
                            <div style="clear:both"></div>
                            <div  class="form-inline" style="margin-top: 15px">
                                <div style="float: left"><label>报价是否含税:</label></div>
                                <div style="float: left;margin-left: 10px">
                                <input type="radio" class="radio-inline"  name="priceAndTax"  value="1" />含税
                                    <input type="radio" class="radio-inline"  name="priceAndTax" value="2"/>不含税
                                </div>
                            </div>
                            <div style="clear:both"></div>
                            <div  class="form-inline" style="margin-top:15px">
                                <div style="float: left"><label>税率:</label></div>
                                <div style="float: left;margin-left: 65px">
                                <input type="text" class="form-control"  name="taxRate"  placeholder="税率"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
           </div>
            <button type="button" class="btn btn-default" onclick="fanhui()"><span class="glyphicon glyphicon-remove" > </span>取消</button>
            <shiro:hasPermission  name="addPurchse:save"><button type="button" class="btn btn-info"  onclick="save()"><span class="glyphicon glyphicon-ok" > </span>保存</button></shiro:hasPermission>
        </form>
    </div>
    <div id="menu2" class="tab-pane fade">
        <div class="panel panel-warning">
            <div class="panel-heading">
                <span class="glyphicon glyphicon-heart" style="color: rgb(247, 3, 94); font-size: 15px;"></span>供应商绑定商品
                <div style="float:right;margin-bottom:30px ">
                    <button type="button"   class="btn btn-info"  name='Submit'  onClick="addinfo()"><span  class="glyphicon glyphicon-star" style="color: rgb(255, 140, 152)" > </span>新增一行</button>
                </div>
            </div>
            <div>
                <form  id="goodForm">
                    <input  type="text"  id="goodSupplierNumber"  name="goodSupplierNumber" />
                    <table id="table3" class="table table-striped"  cellpadding="1" cellspacing="1" >
                        <tr >
                            <td >商品编号</td>
                            <td >商品名称</td>

                        </tr>
                        <tr th:each="go : ${good}">

                            <td th:text="${go.goodNum}">11</td>
                            <td th:text="${go.goodName}">11</td>
                        </tr>

                    </table>
                </form>
            </div>
            <button type="button" class="btn btn-default" onclick="fanhui()"><span class="glyphicon glyphicon-remove" > </span>取消</button>
            <shiro:hasPermission  name="addPurchse:save"><button type="button" class="btn btn-info"  onclick="save()"><span class="glyphicon glyphicon-ok" > </span>保存</button></shiro:hasPermission>
        </div>

    </div>
    <div id="menu3" class="tab-pane fade">
        <form  id="myFile">
            <div class="panel panel-warning">
                <div class="panel-heading">
                    <span class="glyphicon glyphicon-heart" style="color: rgb(247, 3, 94); font-size: 15px;"></span>证件信息
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col-md-10">
                            <div  class="form-inline" >
                                <div style="float: left">
                                    <label>营业执照:</label>
                                </div>
                                <div style="float: left;margin-left: 37px">
                                    <input type="text" class="form-control"  name="adress"   placeholder="营业执照"/>
                                </div>
                            </div>
                            <div style="clear:both"></div>
                            <div  class="form-inline" style="margin-top: 15px">
                                <div style="float: left"><label>XX证件照:</label></div>
                                <div style="float: left;margin-left: 50px">
                                    <input type="text" class="form-control"  name="taxNumber"  placeholder="纳税号"/>
                                </div>
                            </div>
                            <div style="clear:both"></div>
                            <div  class="form-inline" style="margin-top: 15px">
                                <div style="float: left"> <label>XX证件照:</label></div>
                                <div style="float: left;margin-left: 37px">
                                    <input type="text" class="form-control"  name="bank"  placeholder="开户银行"/>
                                </div>
                            </div>
                            <div style="clear:both"></div>
                            <div  class="form-inline" style="margin-top: 15px">
                                <div style="float: left"> <label>XX证件照:</label></div>
                                <div style="float: left;margin-left: 65px">
                                    <input type="text" class="form-control"  name="bankAdress"  placeholder="地址"/>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <button type="button" class="btn btn-default" onclick="fanhui()"><span class="glyphicon glyphicon-remove" > </span>取消</button>
            <shiro:hasPermission  name="addPurchse:save"><button type="button" class="btn btn-info"  onclick="save()"><span class="glyphicon glyphicon-ok" > </span>保存</button></shiro:hasPermission>
        </form>
    </div>

    <div id="menu4" class="tab-pane fade">
        <form  id="myPay">
            <input type="hidden"  name="payId" />
            <input type="hidden"  id="supplierNumberPay"  name="supplierNumberPay" />
            <div class="panel panel-warning">
                <div class="panel-heading">
                    <span class="glyphicon glyphicon-heart" style="color: rgb(247, 3, 94); font-size: 15px;"></span>证件信息
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col-md-10">
                            <div  class="form-inline" >
                                <div style="float: left">
                                    <label>付款方式:</label>
                                </div>
                                <div style="float: left;margin-left: 60px">
                                    <input type="text" class="form-control"  name="payWay"   placeholder="付款方式"/>
                                </div>
                            </div>
                            <div style="clear:both"></div>
                            <div  class="form-inline" style="margin-top: 15px">
                                <div style="float: left"><label>进货后几天付款:</label></div>
                                <div style="float: left;margin-left: 18px">
                                    <input type="text" class="form-control"  name="laterPay"  placeholder="进货后几天付款"/>
                                </div>
                            </div>
                            <div style="clear:both"></div>
                            <div  class="form-inline" style="margin-top: 15px">
                                <div style="float: left"> <label>账期起始日:</label></div>
                                <div style="float: left;margin-left: 45px">
                                    <input type="text" class="form-control"  name="startTime"  placeholder="账期起始日"/>
                                </div>
                            </div>
                            <div style="clear:both"></div>
                            <div  class="form-inline" style="margin-top: 15px">
                                <div style="float: left"> <label>账期:</label></div>
                                <div style="float: left;margin-left: 86px">
                                    <input type="text" class="form-control"  name="countTime"  placeholder="账期"/>
                                </div>
                            </div>
                            <div style="clear:both"></div>
                            <div  class="form-inline" style="margin-top: 15px">
                                <div style="float: left"> <label>账单支付时限:</label></div>
                                <div style="float: left;margin-left: 29px">
                                    <input type="text" class="form-control"  name="countPayTime"  placeholder="账单支付时限"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <button type="button" class="btn btn-default" onclick="fanhui()"><span class="glyphicon glyphicon-remove" > </span>取消</button>
            <shiro:hasPermission  name="addPurchse:save"><button type="button" class="btn btn-info"  onclick="save()"><span class="glyphicon glyphicon-ok" > </span>保存</button></shiro:hasPermission>
        </form>
    </div>

</div>


</body>
    <script>
        $(function(){
            huixain();
            huixainfapiao();
            huixainpay();

        })
        function huiGood(){
            location.href="../purchase/huiGood"
        }
        function saveFive() {
            save();
            savePay();
            saveFaPiao();
        }
        function fanhui() {
            location.href="../purchase/showPurchase"
        }

        function huixain(){
            $.ajax({
                url:'../purchase/huiPurchase',
                async : true,
                type: "POST",
                dataType: "json",
                success : function(data) {
                    $("input[name='id']").val(data.id);
                    $("input[name='supplierNumber']").val(data.supplierNumber);
                     $("input[name='chargePerson']").val(data.chargePerson);
                     $("input[name='supplierSource']").val(data.supplierSource);
                     $("input[name='companyName']").val(data.companyName);
                    // $("input[type=radio][name=sex][value="+result.sex+"]").attr("checked",'checked');
                    $("input[name='simpleName']").val(data.simpleName);
                    $("input[name='brand']").val(data.brand);
                    $("input[name='classification']").val(data.classification);
                    $("input[name='businessScope']").val(data.businessScope);
                    $("input[name='contacts']").val(data.contacts);
                    $("input[name='profession']").val(data.profession);
                    $("input[name='phone']").val(data.phone);
                    $("input[name='telephone']").val(data.telephone);
                    $("input[name='fax']").val(data.fax);
                    $("input[name='email']").val(data.email);
                    $("input[name='qq']").val(data.qq);
                     $("input[name='area']").val(data.area);
                    $("input[name='wechat']").val(data.wechat);
                    $("input[name='adress']").val(data.adress);
                   //  alert($("#deptIdSelect").find("option[value='"+result.deptId+"']"));
                   //  $("#deptIdSelect").val(result.deptId);
                     //$("#postSelect").val(result.post);
                    //$("#deptIdSelect").find("option[value='"+result.deptId+"']").attr('selected','selected');
                    $("select[name='province']").find("option[value='"+data.province+"']").prop("selected",true);
                }
            })
        }
        function huixainfapiao(){
            $.ajax({
                url:'../receipt/huiReceipt',
                async : true,
                type: "POST",
                dataType: "json",
                success : function(data) {
                    $("input[name='receiptId']").val(data.receiptId);
                    $("input[name='supplierNumberFaPiao']").val(data.supplierNumberFaPiao);
                    $("input[name='adressCom']").val(data.adressCom);
                    $("input[name='taxNumber']").val(data.taxNumber);
                    $("input[name='bank']").val(data.bank);
                    $("input[name='bankAdress']").val(data.bankAdress);
                    $("input[type=radio][name=priceAndTax][value="+data.priceAndTax+"]").attr("checked",'checked');
                    $("input[name='taxRate']").val(data.taxRate);
                    //  alert($("#deptIdSelect").find("option[value='"+result.deptId+"']"));
                    //  $("#deptIdSelect").val(result.deptId);
                    //$("#postSelect").val(result.post);
                    //$("#deptIdSelect").find("option[value='"+result.deptId+"']").attr('selected','selected');
                  //  $("select[name='province']").find("option[value='"+data.province+"']").prop("selected",true);
                }
            })
        }
        function huixainpay(){
            $.ajax({
                url:'../pay/huiPay',
                async : true,
                type: "POST",
                dataType: "json",
                success : function(data) {
                    $("input[name='payId']").val(data.payId);
                    $("input[name='payWay']").val(data.payWay);
                    $("input[name='laterPay']").val(data.laterPay);
                    $("input[name='startTime']").val(data.startTime);
                    $("input[name='countTime']").val(data.countTime);
                    // $("input[type=radio][name=sex][value="+result.sex+"]").attr("checked",'checked');
                    $("input[name='countPayTime']").val(data.countPayTime);
                    $("input[name='supplierNumberPay']").val(data.supplierNumberPay);

                }
            })
        }
        function savePay() {
            var g_form = new FormData($("#myPay")[0]);
            $.ajax({
                url : "../pay/addPay",
                async : true,
                type: "POST",
                data: g_form,
                processData: false,
                contentType:false,
                dataType: "json",
                success : function(data) {
                    if(data){
                        alert("添加成功！");
                        location.href="../purchase/showPurchase"
                    }
                },
                error : function(e){
                    alert("请打开F12或者跑debug");
                }
            });
        }
        function saveFaPiao() {
            var g_form = new FormData($("#myReceipt")[0]);
            $.ajax({
                url : "../receipt/addReceipt",
                async : true,
                type: "POST",
                data: g_form,
                processData: false,
                contentType:false,
                dataType: "json",
                success : function(data) {
                    if(data){
                        alert("添加成功！");
                        location.href="../purchase/showPurchase"
                    }
                },
                error : function(e){
                    alert("请打开F12或者跑debug");
                }
            });
        }

        function save(){
            var g_form = new FormData($("#myPurchase")[0]);
            $.ajax({
                url : "../purchase/addPurchase",
                async : true,
                type: "POST",
                data: g_form,
                processData: false,
                contentType:false,
                dataType: "json",
                success : function(data) {
                    if(data){
                        alert("添加成功！");
                        location.href="../purchase/showPurchase"
                    }
                },
                error : function(e){
                    alert("请打开F12或者跑debug");
                }
            });
        }
    </script>
</html>